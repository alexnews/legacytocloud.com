# Plan for December 23, 2025

## Goal
Complete Dashboard functionality + Schema Analyzer (MySQL → Snowflake)

---

## Part 1: Dashboard Functionality

### 1.1 Project Creation Flow
- [ ] Create project form (name, description, source type, target type)
- [ ] Save project to database
- [ ] List projects on dashboard
- [ ] Project detail page

### 1.2 Database Connection UI
- [ ] Add connection form (host, port, user, password, database)
- [ ] Test connection button
- [ ] Save connection (encrypted credentials)
- [ ] Show connection status (connected/failed)

### 1.3 Dashboard Improvements
- [ ] Show project count, connection count
- [ ] Recent activity/history
- [ ] Quick actions (new project, new connection)

---

## Part 2: Schema Analyzer (MySQL → Snowflake)

### 2.1 Backend - MySQL Schema Reader
- [ ] Connect to MySQL database
- [ ] Read all tables
- [ ] Get columns, types, constraints
- [ ] Get row counts
- [ ] Detect "risk flags" (no PK, weird types, BLOBs)

### 2.2 Backend - Type Mapping Engine
- [ ] MySQL → Snowflake type mapping rules
  - VARCHAR → VARCHAR
  - INT → INTEGER
  - BIGINT → BIGINT
  - DECIMAL → NUMBER
  - DATETIME → TIMESTAMP_NTZ
  - TEXT → VARCHAR(16777216)
  - BLOB → BINARY
  - ENUM → VARCHAR
  - JSON → VARIANT
  - etc.

### 2.3 Backend - DDL Generator
- [ ] Generate Snowflake CREATE TABLE statements
- [ ] Handle primary keys
- [ ] Handle indexes (as clustering keys)
- [ ] Output as downloadable SQL file

### 2.4 Frontend - Analysis UI
- [ ] "Run Analysis" button on project page
- [ ] Show progress/loading state
- [ ] Display results:
  - Table list with row counts
  - Type mappings (source → target)
  - Risk flags/warnings
  - Incompatibilities
- [ ] Download DDL button

---

## API Endpoints Needed

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/projects` | GET | List user's projects |
| `/api/projects` | POST | Create new project |
| `/api/projects/{id}` | GET | Get project details |
| `/api/connections` | POST | Add connection |
| `/api/connections/{id}/test` | POST | Test connection |
| `/api/analysis/run` | POST | Run schema analysis |
| `/api/analysis/{id}/results` | GET | Get analysis results |
| `/api/analysis/{id}/ddl` | GET | Download DDL |

---

## Files to Create/Modify

### Backend
- `backend/app/services/mysql_analyzer.py` - MySQL schema reader
- `backend/app/services/type_mapper.py` - Type mapping rules
- `backend/app/services/ddl_generator.py` - Snowflake DDL generator
- `backend/app/api/analysis.py` - Analysis endpoints (may exist)

### Frontend
- `frontend/src/app/dashboard/projects/new/page.tsx` - New project form
- `frontend/src/app/dashboard/projects/[id]/page.tsx` - Project detail
- `frontend/src/app/dashboard/connections/new/page.tsx` - New connection form
- `frontend/src/components/AnalysisResults.tsx` - Results display
- `frontend/src/components/TypeMappingTable.tsx` - Type mapping display

---

## MySQL → Snowflake Type Mapping Reference

| MySQL Type | Snowflake Type | Notes |
|------------|----------------|-------|
| TINYINT | SMALLINT | |
| SMALLINT | SMALLINT | |
| MEDIUMINT | INTEGER | |
| INT | INTEGER | |
| BIGINT | BIGINT | |
| FLOAT | FLOAT | |
| DOUBLE | DOUBLE | |
| DECIMAL(p,s) | NUMBER(p,s) | |
| CHAR(n) | CHAR(n) | |
| VARCHAR(n) | VARCHAR(n) | |
| TEXT | VARCHAR(16777216) | |
| MEDIUMTEXT | VARCHAR(16777216) | |
| LONGTEXT | VARCHAR(16777216) | |
| BLOB | BINARY | |
| DATE | DATE | |
| TIME | TIME | |
| DATETIME | TIMESTAMP_NTZ | |
| TIMESTAMP | TIMESTAMP_NTZ | |
| YEAR | SMALLINT | |
| ENUM | VARCHAR(255) | Values as constraint |
| SET | VARCHAR(255) | |
| JSON | VARIANT | |
| BOOLEAN | BOOLEAN | |

---

## Success Criteria

By end of day:
1. User can create a project
2. User can add MySQL connection
3. User can test connection
4. User can run schema analysis
5. User sees table list with types and warnings
6. User can download Snowflake DDL

---

## Start Command

```
Read steps/start.md and steps/PLAN_2025-12-23.md
Let's start with Part 1.1 - Project Creation Flow
```
